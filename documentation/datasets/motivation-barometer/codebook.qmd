---
title: Codebook
format:
  html:
    toc: true
    toc-depth: 5
    page-layout: full
    smooth-scroll: true
---

# Core module

## Basic Psychological Needs 

### Autonomy

```{r echo = FALSE, message=FALSE}

library(tidyverse)
library(flextable)

codebook_en <- tribble(
  ~variable,  ~label,               ~item_short,                                    ~response_scale,                         ~response_min, ~response_max, ~type,     ~missing, ~notes,
  "auto_1",   "Autonomy item 1",    "I feel free to make my own choices",          "1 = strongly disagree … 5 = strongly agree", 1L, 5L,  "integer", "-99",    "Positively worded.",
  "auto_2",   "Autonomy item 2",    "I feel pressured to do things I do not want", "1 = strongly disagree … 5 = strongly agree", 1L, 5L,  "integer", "-99",    "Reverse-coded for scale score.",
  "auto_3",   "Autonomy item 3",    "I can decide for myself how to live my life", "1 = strongly disagree … 5 = strongly agree", 1L, 5L,  "integer", "-99",    "Positively worded.",
  "auto_mean","Autonomy mean score","Mean of auto_1–auto_3",                       "1–5 (higher = more autonomy satisfaction)", NA,  NA,  "numeric", "-99",    "Min. 2 valid items required."
)

codebook_nl <- tribble(
  ~variable,  ~label,               ~item_short,                                    ~response_scale,                         ~response_min, ~response_max, ~type,     ~missing, ~notes,
  "auto_1",   "Autonomie item 1",   "Ik voel mij vrij om mijn eigen keuzes te maken",
  "1 = helemaal oneens … 5 = helemaal eens", 1L, 5L,  "integer", "-99",    "Positief geformuleerd.",
  "auto_2",   "Autonomie item 2",   "Ik voel mij onder druk gezet om dingen te doen die ik niet wil",
  "1 = helemaal oneens … 5 = helemaal eens", 1L, 5L,  "integer", "-99",    "Omgekeerd gescoord.",
  "auto_3",   "Autonomie item 3",   "Ik kan zelf beslissen hoe ik mijn leven leid",
  "1 = helemaal oneens … 5 = helemaal eens", 1L, 5L,  "integer", "-99",    "Positief geformuleerd.",
  "auto_mean","Gemiddelde autonomie","Gemiddelde van auto_1–auto_3",
  "1–5 (hoger = meer autonomiesatisfactie)", NA,  NA,  "numeric", "-99",    "Min. 2 geldige items vereist."
)

make_ft <- function(dat) {
  dat %>%
    select(
      variable, label, item_short,
      response_scale, response_min, response_max,
      type, missing, notes
    ) %>%
    flextable() %>%
    set_header_labels(
      variable       = "Variable name",
      label          = "Label",
      item_short     = "Item wording (short)",
      response_scale = "Response scale (text)",
      response_min   = "Min",
      response_max   = "Max",
      type           = "Type",
      missing        = "Missing codes",
      notes          = "Notes"
    ) %>%
    autofit() %>%
    align(part = "all", align = "left") %>%
    valign(part = "all", valign = "top") %>%
    fontsize(part = "all", size = 9) %>%
    bold(part = "header") %>%
    theme_booktabs() %>%
    add_header_row(
      values = "Please indicate how much you agree with each statement. \n \n In the past week...",
      colwidths = 9
    ) %>%
    bold(i = 1, part = "header") %>%
    merge_h(i = 1, part = "header")
}

ft_en <- make_ft(codebook_en)
ft_nl <- make_ft(codebook_nl)

```

<select id="lang-select">
  <option value="en">English</option>
  <option value="nl">Nederlands</option>
</select>

<div id="tbl-en">
`r ft_en`
</div>

<div id="tbl-nl" style="display:none;">
`r ft_nl`
</div>



<script>
document.addEventListener("DOMContentLoaded", function() {
  const select = document.getElementById("lang-select");
  const enDiv  = document.getElementById("tbl-en");
  const nlDiv  = document.getElementById("tbl-nl");

  select.addEventListener("change", function() {
    if (this.value === "en") {
      enDiv.style.display = "";
      nlDiv.style.display = "none";
    } else {
      enDiv.style.display = "none";
      nlDiv.style.display = "";
    }
  });
});
</script>
